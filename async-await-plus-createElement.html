<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="style.css">

    <title>AFter regina did the whole targil i try again myself </title>
    <style>

    </style>
</head>

<body>
    <button type="submit" id="showPosts" class="showPosts">Show Posts</button>
    <div class="main-container hide-main-container" id="mainContainer">
        <!-- <div class="post-comment-container">
            <div class="post">
                <div class="title">Title of the post</div>
                <div class="body-post">Body of the Post Lorem ipsum dolor sit amet consectetur, adipisicing elit. Esse iste corporis ut ducimus amet nostrum ipsa aut porro eum mollitia, nobis rerum vero totam qui, est explicabo provident debitis. Odio.</div>
                <div class="btn-post-flex">
                    <button type="submit" class="btn-show-comments">Show Comments</button>
                </div>
            </div>
            <div class="comment-container" id="idfromAPI-not from here">
                <div class="comment-box">
                    <div class="name">Jack Amsterdam</div>
                    <div class="email">jackAmsterdam@gmail.com</div>
                    <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius
                        ut provident.</div>
                </div>
                <div class="comment-box">
                    <div class="name">Jack Amsterdam</div>
                    <div class="email">jackAmsterdam@gmail.com</div>
                    <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius
                        ut provident.</div>
                </div>
                <div class="comment-box">
                    <div class="name">Jack Amsterdam</div>
                    <div class="email">jackAmsterdam@gmail.com</div>
                    <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius
                        ut provident.</div>
                </div>
                <div class="btn-comment-flex">
                    <button type="submit" class="btn-hide-comments">Hide Comments</button>
                </div>
            </div>
        </div>
        <div class="post-comment-container">
            <div class="post">
                <div class="title">{{Title of the post}}</div>
                <div class="body-post">{{Body of the Post Lorem ipsum dolor sit amet consectetur, adipisicing elit. Esse iste corporis ut ducimus amet nostrum ipsa aut porro eum mollitia, nobis rerum vero totam qui, est explicabo provident debitis. Odio.}}</div>
                <div class="btn-post-flex">
                    <button type="submit" class="btn-show-comments">Show Comments</button>
                </div>
            </div>
            <div class="comment-container" id={{{{{{}}}}}}>
                <div class="comment-box">
                    <div class="name">{{Jack Amsterdam}}</div>
                    <div class="email">{{jackAmsterdam@gmail.com}}</div>
                    <div class="body-comment">{{Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores
                        eius ut provident.}}</div>
                </div>
                <div class="comment-box">
                    <div class="name">{{Jack Amsterdam}}</div>
                    <div class="email">{{jackAmsterdam@gmail.com}}</div>
                    <div class="body-comment">{{Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores
                        eius ut provident.}}</div>
                </div>
                <div class="comment-box">
                    <div class="name">{{Jack Amsterdam}}</div>
                    <div class="email">{{jackAmsterdam@gmail.com}}</div>
                    <div class="body-comment">{{Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores
                        eius ut provident.}}</div>
                </div>
                <div class="btn-comment-flex">
                    <button type="submit" class="btn-hide-comments">Hide Comments</button>
                </div>
            </div> -->
    </div>




    <!-- FIRST PART  -->
    <!-- first make html like this:  -->
    <!-- Cant have id  -->
    <!-- <div class="post-comment-container">
        <div class="post">
            <div class="title">Title of the post</div>
            <div class="body-post">Body of the Post Lorem ipsum dolor sit amet consectetur, adipisicing elit. Esse iste corporis ut ducimus amet nostrum ipsa aut porro eum mollitia, nobis rerum vero totam qui, est explicabo provident debitis. Odio.</div>
            <div class="btn-post-flex">
                <button type="submit" class="btn-show-comments">Show Comments</button>
            </div>
        </div>
        <div class="comment-container" id="id taken from API    not from here">
        </div>
    </div> -->

    <!-- SECOND PART -->
    <!-- <div class="comment-box">
        <div class="name">Jack Amsterdam</div>
        <div class="email">jackAmsterdam@gmail.com</div>
        <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius ut provident.</div>
    </div>
    <div class="comment-box">
        <div class="name">Jack Amsterdam</div>
        <div class="email">jackAmsterdam@gmail.com</div>
        <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius ut provident.</div>
    </div>
    <div class="comment-box">
        <div class="name">Jack Amsterdam</div>
        <div class="email">jackAmsterdam@gmail.com</div>
        <div class="body-comment">Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, laboriosam repudiandae, excepturi, ullam repellendus voluptatibus voluptates at ratione id recusandae magni dolor provident? Quisquam quidem, officia asperiores eius ut provident.</div>
    </div> -->

    <!-- Third Part attach button to end of container-->
    <!-- <div class="btn-comment-flex">
        <button type="submit" class="btn-hide-comments">Hide Comments</button>
    </div> -->












    <script>
        let startBtn
        let mainContainer
        document.onreadystatechange = () => {
            if (document.readyState === 'complete') {
                onInit()
            }
        }

        function onInit() {
            startBtn = document.querySelector('#showPosts')
            startBtn.addEventListener('click', grabPostsFromServer)
            mainContainer = document.querySelector('#mainContainer')
                // mainContainer.classList.add('hide-main-container')

        }

        async function grabPostsFromServer(e) {
            mainContainer.innerHTML = ''
            mainContainer.classList.add('hide-main-container')
            const response = await fetch('https://jsonplaceholder.typicode.com/posts')
            const data = await response.json()
            onPostsReceived(data)
        }

        function onPostsReceived(data) {
            mainContainer.classList.remove('hide-main-container')


            data.map(post => {
                let postCommentContainer = document.createElement('div')
                postCommentContainer.classList.add('post-comment-container')

                let postBox = document.createElement('div')
                postBox.classList.add('post')
                postCommentContainer.append(postBox)

                let title = document.createElement('div')
                title.classList.add('title')
                title.innerHTML = post.title //
                postBox.append(title)

                let bodyPost = document.createElement('div')
                bodyPost.classList.add('body-post')
                bodyPost.innerHTML = post.body //
                postBox.append(bodyPost)

                let btnPostFlex = document.createElement('div')
                btnPostFlex.classList.add('btn-post-flex')

                let btnShowComments = document.createElement('button')
                btnShowComments.classList.add('btn-show-comments')
                btnShowComments.type = "submit"
                btnShowComments.innerHTML = 'Show Comments'
                btnShowComments.addEventListener('click', fetchComments.bind(null, post.id))
                    // btnShowComments.onclick = fetchComments.bind(null, post.id)
                btnPostFlex.append(btnShowComments)
                postBox.append(btnPostFlex)

                let commentContainer = document.createElement('div')
                commentContainer.classList.add('comment-container', 'hide-comments')
                commentContainer.id = post.id //
                postBox.append(commentContainer)


                mainContainer.append(postCommentContainer)
            })
        }



        async function fetchComments(id) {
            let commentContainer = document.getElementById(id)
            commentContainer.classList.remove('hide-comments')

            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}/comments`)
            const data = await response.json()
            onCommentsReceived(data, id)
        }


        function onCommentsReceived(data, id) {

            let commentContainer = document.getElementById(id)
            commentContainer.innerHTML = ''


            data.map(comment => {
                let commentBox = document.createElement('div')
                commentBox.classList.add('comment-box')

                let nameComment = document.createElement('div')
                nameComment.classList.add('name')
                nameComment.innerHTML = comment.name
                commentBox.append(nameComment)

                let emailComment = document.createElement('div')
                emailComment.classList.add('email')
                emailComment.innerHTML = comment.email
                commentBox.append(emailComment)

                let bodyComment = document.createElement('div')
                bodyComment.classList.add('body-comment')
                bodyComment.innerHTML = comment.body
                commentBox.append(bodyComment)

                commentContainer.append(commentBox)

            })

            let btnCommentFlex = document.createElement('div')
            btnCommentFlex.classList.add('btn-comment-flex')
            commentContainer.append(btnCommentFlex)

            let btnHideComments = document.createElement('button')
            btnHideComments.type = 'submit'
            btnHideComments.classList.add('btn-hide-comments')
            btnHideComments.innerHTML = 'Hide Comments'
            btnHideComments.addEventListener('click', hideComments.bind(null, id))

            btnCommentFlex.append(btnHideComments)
        }

        function hideComments(id) {
            console.log('id', id)
            let commentContainer = document.getElementById(id)
            commentContainer.classList.add('hide-comments')
        }
    </script>
</body>

</html>